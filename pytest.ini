[tool:pytest]
# Deep Testing Configuration for Timepoint-Daedalus
# Runs comprehensive system, integration, and e2e tests with full LLM capabilities

# Test discovery and execution
testpaths = .
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Verbose output with detailed reporting
addopts =
    -v
    --runslow
    --maxfail=0
    -m "system or integration or e2e"
    --tb=short
    --durations=10
    --strict-markers
    --strict-config

# Test markers for comprehensive testing
markers =
    # Core test categories for deep testing
    system: marks tests as system-level validations (comprehensive system behavior)
    integration: marks tests as integration tests (component interactions)
    e2e: marks tests as end-to-end tests (full workflow validation)

    # Performance and resource markers
    slow: marks tests as resource-intensive or slow-running (LLM calls, full simulations)
    performance: marks tests focused on performance metrics and benchmarks

    # Feature-specific markers
    llm: marks tests that make actual LLM API calls
    animism: marks tests for animistic entity functionality
    temporal: marks tests for modal temporal causality
    ai_entity: marks tests for AI entity service components

    # Quality assurance markers
    validation: marks tests for data validation and consistency checks
    safety: marks tests for security and safety features
    compliance: marks tests for regulatory and compliance requirements

# Test execution configuration
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    error::ResourceWarning

# Parallel execution (optional, can be enabled with -n auto)
# junit_family = xunit2

# Coverage configuration (disabled for deep testing to avoid shallow optimization)
# addopts coverage disabled - focus on comprehensive execution
# --no-cov

# Logging configuration for test debugging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
log_cli_date_format = %H:%M:%S

# Async test support
asyncio_mode = auto

# Doctest configuration
doctest_plus = enabled
doctest_optionflags =
    NORMALIZE_WHITESPACE
    ELLIPSIS
    IGNORE_EXCEPTION_DETAIL
